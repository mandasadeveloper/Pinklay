{% comment %}
{% if settings.font_1 == 'google_fonts' or settings.font_2 == 'google_fonts' or settings.font_3 == 'google_fonts' %}
<script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 
      {% if settings.font_1 == 'google_fonts' %}
          '{{ settings.fonts_name_1 }}:100,200,300,400,500,600,700,800,900'
	  {% endif %}
      
      {% if settings.font_2 == 'google_fonts' %}
      	{% if settings.font_1 == 'google_fonts' %}
      		,
      	{% endif %}      
        '{{ settings.fonts_name_2 }}:100,200,300,400,500,600,700,800,900'
	  {% endif %}
      
      {% if settings.font_3 == 'google_fonts' %}
      	{% if settings.font_1 == 'google_fonts' or settings.font_2 == 'google_fonts' %}
      		,
      	{% endif %}      
        '{{ settings.fonts_name_3 }}:100,200,300,400,500,600,700,800,900'
	  {% endif %}
      
      {% if settings.font_4 == 'google_fonts' %}
      	{% if settings.font_1 == 'google_fonts' or settings.font_2 == 'google_fonts' or settings.font_3 == 'google_fonts' %}
      		,
      	{% endif %}      
        '{{ settings.fonts_name_4 }}:100,200,300,400,500,600,700,800,900'
	  {% endif %}
    ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 
</script>
{% endif %}
{% endcomment %}

{% if settings.font_1 == 'google_fonts' or settings.font_2 == 'google_fonts' or settings.font_3 == 'google_fonts' %}

<script>
const loadFont = (url) => {
  // the 'fetch' equivalent has caching issues
  var xhr = new XMLHttpRequest();
  xhr.open('GET', url, true);
  xhr.onreadystatechange = () => {
    if (xhr.readyState == 4 && xhr.status == 200) {
      let css = xhr.responseText;
      css = css.replace(/}/g, 'font-display: swap; }');

      const head = document.getElementsByTagName('head')[0];
      const style = document.createElement('style');
      style.appendChild(document.createTextNode(css));
      head.appendChild(style);
    }
  };
  xhr.send();
}
{% if settings.font_1 == 'google_fonts' %}
loadFont("https://fonts.googleapis.com/css?family={{ settings.fonts_name_1 }}:100,200,300,400,500,600,700,800,900");
{% endif %}  

{% if settings.font_2 == 'google_fonts' %}
loadFont("https://fonts.googleapis.com/css?family={{ settings.fonts_name_2 }}:100,200,300,400,500,600,700,800,900");
{% endif %}  


{% if settings.font_3 == 'google_fonts' %}
loadFont("https://fonts.googleapis.com/css?family={{ settings.fonts_name_3 }}:100,200,300,400,500,600,700,800,900");
{% endif %}  


{% if settings.font_4 == 'google_fonts' %}
loadFont("https://fonts.googleapis.com/css?family={{ settings.fonts_name_4 }}:100,200,300,400,500,600,700,800,900");
{% endif %}  

</script>
{% endif %}